# 2019年全国研究生数学建模竞赛F题方案

具体方案见论文，每题分别放在不同的文件夹里，直接运行main.py即可  
数据已经事先处理好，将原始数据集xlsx转换为csv文件是为了用pandas库方便处理数据  
在代码运行过程中会生成几个结果或者过程文件，方便查看方案效果  
最后会出现一张效果图和两张进化图  

**question1中代码注释完整，其他代码若不清楚可查看question1中的注释**  

## 问题一  
在不考虑飞行最小转弯半径与校正失败率的前提下，我们对分别含有610个校正点与324个校正点的飞行空间进行多目标多约束条件下的航迹规划。其中，对于附件1，即含有610个校正点的数据集，航迹校正次数为10次，航迹长度为106331m，对于附件2，即含有324个校正点的数据集，航迹校正次数为12次，航迹长度为109342m 。已知起点到终点的直线距离为100465m，两次飞行路径校正次数较小，航迹长度相比于直线距离仅提高了5.83%与8.92%，因此航迹规划合理。

## 问题二  
在问题一的基础上考虑飞行器的最小转弯半径。在本问题的讨论上，相邻校正点之间的飞行路程增加，进而影响误差累计情况。由于最小航迹长度是考虑的目标之一，相邻校正点之间的飞行路径为飞行器首先以最小半径沿圆弧运行，在方向指向下一个校正点的时候沿直线飞行。我们求解到，对于附件1，即含有610个校正点的数据集，航迹校正次数为9次，航迹长度为115023m，对于附件2，即含有324个校正点的数据集，航迹校正次数为14次，航迹长度为115481m 。因为问题二增加的约束条件，附件一的校正次数相比于问题一减少了1次，航迹相长度比问题一增加了8692m，提高了8.14%。附件一的校正次数相比于问题一增加了2次，航迹相长度比问题一增加了6139m，提高了5.61%。新增的约束条件的限制对目标有一定影响，但是差别不大，我们认为是满意的解。

## 问题三  
在问题三在问题一的基础上考虑校正成功率。本问题我们基础约束条件的可靠度，即满足约束条件的概率大于一个阈值是，我们认为是满足约束条件的。在该基础上，尽可能的地最小化校正次数与航迹长度。因为时间的关系，我们未能及时优化算法复杂度，我们仅得到附件一的校正次数为12次。由于附件2校正点较为离散，搜索时间长，我们暂时未能得到最优化结果。  

### 亮点与创新点：
- 针对于原始数据，我们利用规则引擎，尽可能减小了搜索解空间，并且不丢失最优解存在区域，规则一是飞行器飞行方向在AB线上的投影只能指向B，以防止飞行器为了局部最优路径长度而逆向飞行，符合生活常识也有良好的实验效果，规则二是只取了AB周围一个管道内的校正点作为搜索空间，在数据集中的校正点分布相对均匀、分布范围较广的情况下有效地提高了搜索速度，规则三是针对于规则一、二建立起的待选区域中的每个校正点，建立半球邻近胞体模型，把航迹上的相邻校正点限制在较短距离内，有目的地去搜索，也大大加快了搜索速度，这三个规则足够找到一定数量的初代可行解，甚至一定程度上也是较优解；
- 针对于传统的遗传算法，我们针对于变异和适应度计算进行了改进，针对于变异，我们在试验过程中，发现传统的遗传算法在此问题中进化较慢，为了一定程度上改善这个问题，我们改进了变异思路，将传统中的单位变异改成单位状态转移，不仅将选中的变异位状态变异，并且在它的邻近区域选择另外一个点代替它之前的状态，使得变异后的个体有更大几率是可行解。针对于适应度计算，我们采用了多目标函数加权和评价方法，把约束条件和多目标函数的各自惩罚系数联系起来，实现了群体最优；
- 针对于问题2，我们建立了一个稳定的强规则，即文中所描述的环形管道规则，并且构造出了飞行器在两个校正点之间的最短路径模型，即先沿最小半径圆弧再直线飞向目标点的路径，在求解路径长度、飞行方向的过程中运用了较多的空间几何和平面几何理论，有效性较好；
- 针对于问题3，我们在问题1的基础上构建了机会约束规划模型，即在可信度的范围之外，给予多目标函数各自一定的惩罚系数，以体现较小机会下的惩罚。  

**关键词**：航迹规划、遗传算法、多目标函数加权和评价、四元数、机会约束规划、规则引擎
